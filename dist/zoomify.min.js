/*! Zoomify - v0.1.0 - https://github.com/indrimuska/zoomify - (c) 2015 Indri Muska - MIT */
!function(a){function b(){defaults={delay:200,easing:"linear",scale:.9},this._zoomed=!1,this._timeout=null,this.$shadow=null}b.prototype.init=function(b,c){var d=this;this.$image=a(b).addClass("zoomify"),this.options=a.extend({},defaults,c),this.$image.on("click",function(){d.zoom()}),a(window).on("resize",function(){d.reposition()}),a(document).on("scroll",function(){d.reposition()})},b.prototype.transition=function(a,b){(b||this.$image).css({"-webkit-transition":a,"-moz-transition":a,"-ms-transition":a,"-o-transition":a,transition:a})},b.prototype.addTransition=function(a){this.transition("all "+this.options.delay+"ms "+this.options.easing,a)},b.prototype.removeTransitionAfterTransition=function(a){var b=this;clearTimeout(this._timeout),this._timeout=setTimeout(function(){b.transition("",a)},this.options.delay)},b.prototype.transform=function(a){this.$image.css({"-webkit-transform":a,"-moz-transform":a,"-ms-transform":a,"-o-transform":a,transform:a})},b.prototype.doTransform=function(a,b,c){this.addTransition(),this.transform("scale("+a+") translate("+b+"px, "+c+"px)"),this.removeTransitionAfterTransition()},b.prototype.zoom=function(){this._zoomed?this.zoomOut():this.zoomIn()},b.prototype.zoomIn=function(){var b=this,c=this.$image.css("transform");this.transform("none"),this.transition("none"),this.$image.addClass("zoomed");var d=this.$image.offset(),e=this.$image.outerWidth(),f=this.$image.outerHeight(),g=a(window).width(),h=a(window).height(),i=g/e,j=h/f,k=Math.min(i,j)*this.options.scale,l=(-d.left+(g-e)/2)/k,m=(-d.top+(h-f)/2+a(document).scrollTop())/k;this.transform(c),setTimeout(function(){b.addShadow(),b.doTransform(k,l,m),b._zoomed=!0})},b.prototype.zoomOut=function(){this.$image.removeClass("zoomed"),this.doTransform(1,0,0),this.removeShadow(),this._zoomed=!1},b.prototype.reposition=function(){this._zoomed&&(this.transition("none"),this.zoomIn())},b.prototype.addShadow=function(){var b=this;this.$shadow||(this.$shadow=a('<div class="zoomify-shadow"></div>'),a("body").append(this.$shadow),this.addTransition(this.$shadow),this.$shadow.on("click",function(){b.zoomOut()}),setTimeout(function(){b.$shadow.addClass("zoomed")},10))},b.prototype.removeShadow=function(){var a=this;this.addTransition(this.$shadow),this.$shadow.removeClass("zoomed"),setTimeout(function(){a.$shadow.remove(),a.$shadow=null},this.options.delay)},a.fn.zoomify=function(a){return this.each(function(){var c=new b;c.init(this,a)}),this}}(jQuery);