/*! Zoomify - v0.2.0 - https://github.com/indrimuska/zoomify - (c) 2015 Indri Muska - MIT */
!function(a){function b(){defaults={duration:200,easing:"linear",scale:.9},this._zooming=!1,this._zoomed=!1,this._timeout=null,this.$shadow=null}b.prototype.init=function(b,c){var d=this;this.$image=a(b).addClass("zoomify"),this.options=a.extend({},defaults,c),this.$image.on("click",function(){d.zoom()}),a(window).on("resize",function(){d.reposition()}),a(document).on("scroll",function(){d.reposition()})},b.prototype.transition=function(a,b){a.css({"-webkit-transition":b,"-moz-transition":b,"-ms-transition":b,"-o-transition":b,transition:b})},b.prototype.addTransition=function(a){this.transition(a,"all "+this.options.duration+"ms "+this.options.easing)},b.prototype.removeTransition=function(b,c){var d=this;clearTimeout(this._timeout),this._timeout=setTimeout(function(){d.transition(b,""),a.isFunction(c)&&c.call(d)},this.options.duration)},b.prototype.transform=function(a){this.$image.css({"-webkit-transform":a,"-moz-transform":a,"-ms-transform":a,"-o-transform":a,transform:a})},b.prototype.transformScaleAndTranslate=function(a,b,c,d){this.addTransition(this.$image),this.transform("scale("+a+") translate("+b+"px, "+c+"px)"),this.removeTransition(this.$image,d)},b.prototype.zoom=function(){this._zooming||(this._zoomed?this.zoomOut():this.zoomIn())},b.prototype.zoomIn=function(){var b=this,c=this.$image.css("transform");this.transform("none"),this.transition(this.$image,"none"),this.$image.addClass("zoomed");var d=this.$image.offset(),e=this.$image.width(),f=this.$image.height(),g=a(window).width(),h=a(window).height(),i=g/e,j=h/f,k=Math.min(i,j)*this.options.scale,l=(-d.left+(g-e)/2)/k,m=(-d.top+(h-f)/2+a(document).scrollTop())/k;this.transform(this.$image,c),this._zooming=!0,b.$image.trigger("zoom-in.zoomify"),setTimeout(function(){b.addShadow(),b.transformScaleAndTranslate(k,l,m,function(){this._zooming=!1,b.$image.trigger("zoom-in-complete.zoomify")}),b._zoomed=!0})},b.prototype.zoomOut=function(){var a=this;this._zooming=!0,a.$image.trigger("zoom-out.zoomify"),this.transformScaleAndTranslate(1,0,0,function(){this._zooming=!1,a.$image.trigger("zoom-out-complete.zoomify")}),this.removeShadow(),this._zoomed=!1},b.prototype.reposition=function(){this._zoomed&&(this.transition(this.$image,"none"),this.zoomIn())},b.prototype.addShadow=function(){var b=this;this._zoomed||(b.$shadow&&b.$shadow.remove(),this.$shadow=a('<div class="zoomify-shadow"></div>'),a("body").append(this.$shadow),this.addTransition(this.$shadow),this.$shadow.on("click",function(){b.zoomOut()}),setTimeout(function(){b.$shadow.addClass("zoomed")},10))},b.prototype.removeShadow=function(){var a=this;this.$shadow&&(this.addTransition(this.$shadow),this.$shadow.removeClass("zoomed"),this.$image.one("zoom-out-complete.zoomify",function(){a.$shadow&&a.$shadow.remove(),a.$shadow=null}))},a.fn.zoomify=function(a){return this.each(function(){var c=new b;c.init(this,a)}),this}}(jQuery);